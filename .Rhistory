filter(grepl('Healthy', indicator)) %>%
select(area_code,area_name,indicator,measure,upper_confidence_interval,lower_confidence_interval) %>%
rename(sex = indicator,
hle = measure) %>%
mutate(sex = gsub('Healthy life expectancy, females','0', sex))
head(hle)
View(hle)
Data <- read_csv("ScotPHO_data.csv")
glimpse(Data)
hle <- Data %>%
filter(grepl('Healthy', indicator)) %>%
select(area_code,area_name,indicator,measure,upper_confidence_interval,lower_confidence_interval) %>%
rename(sex = indicator,
hle = measure) %>%
mutate(sex = gsub('Healthy life expectancy, females','0', sex,)) %>%
mutate(sex = gsub('Healthy life expectancy, males','1', sex,))
head(hle)
View(hle)
View(Data)
knitr::opts_chunk$set(echo = TRUE)
install.packages(tidyverse)
library(readr)
library(dplyr)
library(ggplot2)
hle <- Data %>%
filter(grepl('Healthy', indicator)) %>%
select(area_code,area_name,indicator,measure,upper_confidence_interval,lower_confidence_interval) %>%
rename(sex = indicator,
hle = measure) %>%
mutate(sex = gsub('Healthy life expectancy, females','0', sex,)) %>%
mutate(sex = gsub('Healthy life expectancy, males','1', sex,))
head(hle)
summarise(hle)
hle <- Data %>%
filter(grepl('Healthy', indicator)) %>%
select(area_code,area_name,indicator,measure,upper_confidence_interval,lower_confidence_interval) %>%
rename(sex = indicator,
hle = measure) %>%
mutate(sex = gsub('Healthy life expectancy, females','0', sex,)) %>%
mutate(sex = gsub('Healthy life expectancy, males','1', sex,))
head(hle)
glimpse(hle)
knitr::opts_chunk$set(echo = TRUE)
install.packages(tidyverse)
library(readr)
library(dplyr)
library(ggplot2)
Data <- read_csv("ScotPHO_data.csv")
glimpse(Data)
knitr::opts_chunk$set(echo = TRUE)
install.packages(tidyverse)
library(readr)
library(dplyr)
library(ggplot2)
Data <- read_csv("ScotPHO_data.csv")
glimpse(Data)
hle <- Data %>%
filter(grepl('Healthy', indicator)) %>%
select(area_code,area_name,indicator,measure,upper_confidence_interval,lower_confidence_interval) %>%
rename(sex = indicator,
hle = measure) %>%
mutate(sex = gsub('Healthy life expectancy, females','0', sex,)) %>%
mutate(sex = gsub('Healthy life expectancy, males','1', sex,))
head(hle)
glimpse(hle)
View(Data)
View(Data)
pid <- Data %>%
filter(grepl('Population income', indicator)) %>%
select(area_code,area_name,numerator,measure,upper_confidence_interval,lower_confidence_interval) %>%
rename(total pop = numerator,
pid <- Data %>%
filter(grepl('Population income', indicator)) %>%
select(area_code,area_name,numerator,measure,upper_confidence_interval,lower_confidence_interval) %>%
rename(total population = numerator,
pid <- Data %>%
filter(grepl('Population income', indicator)) %>%
select(area_code,area_name,numerator,measure,upper_confidence_interval,lower_confidence_interval) %>%
rename(population = numerator,
pid = measure) %>%
head(hle)
pid <- Data %>%
drop(NA)
pid <- Data %>%
drop_NA %>%
filter(grepl('Population income', indicator)) %>%
select(area_code,area_name,numerator,measure,upper_confidence_interval,lower_confidence_interval) %>%
rename(population = numerator,
pid = measure) %>%
head(hle)
pid <- Data %>%
drop(NA) %>%
filter(grepl('Population income', indicator)) %>%
select(area_code,area_name,numerator,measure,upper_confidence_interval,lower_confidence_interval) %>%
rename(population = numerator,
pid = measure) %>%
head(hle)
knitr::opts_chunk$set(echo = TRUE)
pid <- Data %>%
drop_na()) %>%
pid <- Data %>%
drop_na() %>%
filter(grepl('Population income', indicator)) %>%
select(area_code,area_name,numerator,measure,upper_confidence_interval,lower_confidence_interval) %>%
rename(population = numerator,
pid = measure) %>%
head(hle)
pid <- Data %>%
drop_na() %>%
pid <- Data %>%
drop_na() %>%
pid <- Data %>%
drop_na()
pid <- Data  %>%
drop_na()
knitr::opts_chunk$set(echo = TRUE)
install.packages(tidyverse)
library(readr)
library(dplyr)
library(ggplot2)
Data <- read_csv("ScotPHO_data.csv")
glimpse(Data)
hle <- Data %>%
filter(grepl('Healthy', indicator)) %>%
select(area_code,area_name,indicator,measure,upper_confidence_interval,lower_confidence_interval) %>%
rename(sex = indicator,
hle = measure) %>%
mutate(sex = gsub('Healthy life expectancy, females','0', sex,)) %>%
mutate(sex = gsub('Healthy life expectancy, males','1', sex,))
head(hle)
glimpse(hle)
pid <- Data  %>%
drop_na() %>%
filter(grepl('Population income', indicator)) %>%
select(area_code,area_name,numerator,measure,upper_confidence_interval,lower_confidence_interval) %>%
rename(population = numerator,
pid = measure) %>%
head(hle)
pid <- Data  %>%
drop(NA) %>%
filter(grepl('Population income', indicator)) %>%
select(area_code,area_name,numerator,measure,upper_confidence_interval,lower_confidence_interval) %>%
rename(population = numerator,
pid = measure) %>%
head(hle)
pid <- Data  %>%
drop(pid, NA) %>%
filter(grepl('Population income', indicator)) %>%
select(area_code,area_name,numerator,measure,upper_confidence_interval,lower_confidence_interval) %>%
rename(population = numerator,
pid = measure) %>%
head(hle)
knitr::opts_chunk$set(echo = TRUE)
install.packages(tidyverse)
library(readr)
library(tidyr)
library(dplyr)
library(ggplot2)
pid <- Data  %>%
drop(NA) %>%
filter(grepl('Population income', indicator)) %>%
select(area_code,area_name,numerator,measure,upper_confidence_interval,lower_confidence_interval) %>%
rename(population = numerator,
pid = measure) %>%
head(hle)
pid <- Data  %>%
drop_na() %>%
filter(grepl('Population income', indicator)) %>%
select(area_code,area_name,numerator,measure,upper_confidence_interval,lower_confidence_interval) %>%
rename(population = numerator,
pid = measure) %>%
head(hle)
pid <- Data  %>%
drop_na() %>%
filter(grepl('Population income', indicator)) %>%
select(area_code,area_name,numerator,measure,upper_confidence_interval,lower_confidence_interval) %>%
rename(population = numerator,
pid = measure) %>%
head(pid)
pid <- Data  %>%
drop_na()
filter(grepl('Population income', indicator)) %>%
select(area_code,area_name,numerator,measure,upper_confidence_interval,lower_confidence_interval) %>%
rename(population = numerator,
pid = measure) %>%
head(pid)
pid <- Data  %>%
drop_na()
pid %>%
filter(grepl('Population income', indicator)) %>%
select(area_code,area_name,numerator,measure,upper_confidence_interval,lower_confidence_interval) %>%
rename(population = numerator,
pid = measure) %>%
head(pid)
View(pid)
pid <- Data  %>%
drop_na()
pid %>%
select(area_code,area_name,numerator,measure,upper_confidence_interval,lower_confidence_interval) %>%
rename(population = numerator,
pid = measure) %>%
head(pid)
pid <- Data  %>%
drop_na()
pid %>%
select(area_code,area_name,numerator,measure,upper_confidence_interval,lower_confidence_interval) %>%
rename(population = numerator,
pid = measure) %>%
pid <- Data  %>%
drop_na()
pid %>%
select(area_code,area_name,numerator,measure,upper_confidence_interval,lower_confidence_interval) %>%
rename(population = numerator,
pid = measure)
mental <- Data %>%
filter(grepl('Mental', indicator)) %>%
select(area_code,area_name,measure,upper_confidence_interval,lower_confidence_interval) %>%
rename(mental_score = measure)
finance <- Data %>%
filter(grepl('Households', indicator)) %>%
select(area_code,area_name,measure,upper_confidence_interval,lower_confidence_interval) %>%
rename(finance = measure)
View(hle)
mean_hle <- hle %>%
group_by(area_code)
summarise(mean_hle)
mean_hle <- hle %>%
group_by(area_code)
mutate(mean_hle = mean(hle))
View(mean_hle)
mean_hle <- hle %>%
group_by(area_code) %>%
mutate(mean_hle = mean(hle))
View(mean_hle)
mean_hle <- hle %>%
group_by(area_code) %>%
mutate(mean_hle = mean(hle)) %>%
slice_tail(n=32)
View(mean_hle)
mean_hle <- hle %>%
group_by(area_code) %>%
mutate(mean_hle = mean(hle)) %>%
mean_hle <- hle %>%
group_by(area_code) %>%
mutate(mean_hle = mean(hle))
mean_hle %>%
slice_tail(n=32)
View(mean_hle)
mean_hle <- hle %>%
group_by(area_code) %>%
mutate(mean_hle = mean(hle))
mean_hle %>%
slice(sex == 1)
mean_hle <- hle %>%
group_by(area_code) %>%
mutate(mean_hle = mean(hle))
mean_hle %>%
slice(c(sex == 1))
mean_hle <- hle %>%
group_by(area_code) %>%
mutate(mean_hle = mean(hle))
mean_hle %>%
filter(row_number(1 %in% 32))
mean_hle <- hle %>%
group_by(area_code) %>%
mutate(mean_hle = mean(hle))
mean_hle %>%
filter(row_number(<=32)
mean_hle <- hle %>%
group_by(area_code) %>%
mutate(mean_hle = mean(hle))
mean_hle %>%
filter(row_number<=32)
?slice_tail
mean_hle <- hle %>%
group_by(area_code) %>%
mutate(mean_hle = mean(hle))
mean_hle %>%
slice_head(32)
mean_hle <- hle %>%
group_by(area_code) %>%
mutate(mean_hle = mean(hle))
mean_hle %>%
slice_head(n=32)
mean_hle <- hle %>%
group_by(area_code) %>%
mutate(mean_hle = mean(hle))
mean_hle %>%
arrange(desc(sex))
slice_head(n=32)
mean_hle <- hle %>%
group_by(area_code) %>%
mutate(mean_hle = mean(hle))
mean_hle %>%
arrange(desc(sex)) %>%
slice_head(n=32)
View(mean_hle)
mean_hle <- hle %>%
group_by(area_code) %>%
mutate(mean_hle = mean(hle))
View(mean_hle)
mean_hle %>%
slice_head(n=32)
mean_hle <- hle %>%
group_by(area_code) %>%
mutate(mean_hle = mean(hle))
head(mean_hle)
mean_hle <- hle %>%
group_by(area_code) %>%
mutate(mean_hle = mean(hle))
mean_hle %>%
slice_head(n=32)
head(mean_hle)
?arrange
mean_hle <- hle %>%
group_by(area_code) %>%
mutate(mean_hle = mean(hle))
mean_hle %>%
desc(sex)
mean_hle <- hle %>%
group_by(area_code) %>%
mutate(mean_hle = mean(hle))
mean_hle %>%
desc()
mean_hle <- hle %>%
group_by(area_code) %>%
mutate(mean_hle = mean(hle))
mean_hle %>%
desc(sex) %>%
slice_head(n=32)
mean_hle <- hle %>%
group_by(area_code) %>%
mutate(mean_hle = mean(hle))
mean_hle %>%
arrange(desc(sex)) %>%
slice_head(n=32)
head(mean_hle)
View(mean_hle)
mean_hle <- hle %>%
group_by(area_code) %>%
mutate(mean_hle = mean(hle))
mean_hle1 <- mean_hle %>%
arrange(desc(sex)) %>%
slice_tail(n=32)
head(mean_hle1)
mean_hle <- hle %>%
group_by(area_code) %>%
mutate(mean_hle = mean(hle))
mean_hle %>%
distinct()
head(mean_hle)
View(mean_hle1)
View(mean_hle1)
mean_hle <- hle %>%
group_by(area_code) %>%
mutate(mean_hle = mean(hle))
mean_hle %>%
distinct()
mean_hle %>%
distinct()
mean_hle <- hle %>%
group_by(area_code) %>%
mutate(mean_hle = mean(hle)) %>%
arrange_all(desc(sex))
knitr::opts_chunk$set(echo = TRUE)
mean_hle <- hle %>%
group_by(area_code) %>%
mutate(mean_hle = mean(hle)) %>%
mean_hle <- hle %>%
group_by(area_code) %>%
mutate(mean_hle = mean(hle))
View(mean_hle)
mean_hle <- hle %>%
group_by(area_code) %>%
mutate(mean_hle = mean(hle)) %>%
ungroup()
mean_hle <- hle %>%
group_by(area_code) %>%
mutate(mean_hle = mean(hle)) %>%
ungroup(area_code)
mean_hle <- hle %>%
group_by(area_code) %>%
mutate(mean_hle = mean(hle)) %>%
slice_min(sex)
mean_hle <- hle %>%
group_by(area_code) %>%
mutate(mean_hle = mean(hle))
mean_hle <- hle %>%
group_by(area_code) %>%
mutate(mean_hle = mean(hle))
mean_hle <- hle %>%
group_by(area_code) %>%
mutate(mean_hle = mean(hle)) %>%
slice_min(sex)
mean_hle <- hle %>%
group_by(area_code) %>%
mutate(mean_hle = mean(hle)) %>%
arrange_all(desc(sex))
mean_hle <- hle %>%
group_by(area_code) %>%
mutate(mean_hle = mean(hle))
mean_hle <- hle %>%
group_by(area_code) %>%
mutate(mean_hle = mean(hle))
View(mean_hle)
mean_hle %>%
group_by(sex)
knitr::opts_chunk$set(echo = TRUE)
install.packages(tidyverse)
library(readr)
library(tidyr)
library(dplyr)
library(ggplot2)
Data <- read_csv("ScotPHO_data.csv")
glimpse(Data)
hle <- Data %>%
filter(grepl('Healthy', indicator)) %>%
select(area_code,area_name,indicator,measure,upper_confidence_interval,lower_confidence_interval) %>%
rename(sex = indicator,
hle = measure) %>%
mutate(sex = gsub('Healthy life expectancy, females','0', sex,)) %>%
mutate(sex = gsub('Healthy life expectancy, males','1', sex,))
head(hle)
glimpse(hle)
mean_hle <- hle %>%
group_by(area_code) %>%
mutate(mean_hle = mean(hle))
mean_hle <- hle %>%
group_by(area_code) %>%
mutate(mean_hle = mean(hle))
mean_hle <- hle %>%
group_by(area_code) %>%
mutate(mean_hle = mean(hle))
slice_head(n=32)
mean_hle <- hle %>%
group_by(area_code) %>%
mutate(mean_hle = mean(hle))
slice_head(c(sex), n=32)
mean_hle <- hle %>%
group_by(area_code) %>%
mutate(mean_hle = mean(hle))
slice_head(c(sex) == 0)
mean_hle <- hle %>%
group_by(area_code) %>%
mutate(mean_hle = mean(hle))
mean_hle %>%
group_by(sex)
head(mean_hle)
mean_hle %>%
group_by(sex) %>%
slice_head(n-32)
mean_hle %>%
group_by(sex) %>%
slice_head(32)
mean_hle %>%
group_by(sex) %>%
slice_head(n=32)
head(mean_hle)
mean_hle %>%
group_by(sex) %>%
slice_head()
head(mean_hle)
mean_hle %>%
group_by(sex) %>%
slice(sex, n=32)
mean_hle %>%
group_by(sex) %>%
slice('sex', n=32)
mean_hle %>%
group_by(sex) %>%
slice_head(sex, n=32)
mean_hle %>%
slice_head(sex, n=32)
mean_hle %>%
slice_head(n=32)
head(mean_hle)
mean_hle %>%
arrange_(desc(sex))
mean_hle %>%
arrange_(desc($sex))
mean_hle %>%
arrange_(desc(area_code))
mean_hle %>%
arrange_(desc(area_code)) %>%
slice_head(n=32)
mean_hle %>%
arrange_(desc(sex)) %>%
slice_head(n=32)
mean_hle %>%
arrange_(desc()) %>%
slice_head(n=32)
mean_hle1 %>%
arrange_(desc(sex)) %>%
slice_head(n=32)
mean_hle1 %>%
filter(sex == 1)
head(mean_hle1)
mean_hle1 %>%
filter(sex != 1)
head(mean_hle1)
mean_hle %>%
filter(sex != 1)
head(mean_hle)
mean_hle1 <- mean_hle %>%
filter(sex != 1)
View(mean_hle1)
mean_hle1 <- mean_hle %>%
filter(sex != 1) %>%
select(area_code, area_name, mean_hle)
head(mean_hle1)
knitr::opts_chunk$set(echo = TRUE)
data_final <- left_join(mean_hle1, pid, by=c('area_code'='area_Code'))
